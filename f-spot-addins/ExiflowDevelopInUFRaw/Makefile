FSPOTDIR = /home/sb/local/opt/f-spot
#FSPOTDIR = /usr
GCONFTOOL = /usr/bin/gconftool-2

all: ExiflowDevelopInUFRaw.dll

PACKAGES = \
	-pkg:gtk-sharp-2.0	\
	-pkg:glade-sharp-2.0	\
	-pkg:glib-sharp-2.0	\
	-pkg:f-spot \
	-pkg:gnome-vfs-sharp-2.0 \
        -r:$(FSPOTDIR)/lib/f-spot/gtk-sharp-beans.dll \
        -r:$(FSPOTDIR)/lib/f-spot/gio-sharp.dll \
        -r:$(FSPOTDIR)/lib/f-spot/Hyena.dll \
        -r:$(FSPOTDIR)/lib/f-spot/Hyena.Gui.dll 

ASSEMBLIES = \
	-r:Mono.Posix

RESOURCES = \
	-resource:ExiflowDevelopInUFRaw.addin.xml

SOURCES = \
	ExiflowDevelopInUFRaw.cs

install: all
	cp *.dll ~/.config/f-spot/addins/

mpack: ExiflowDevelopInUFRaw.dll
	mautil p ExiflowDevelopInUFRaw.dll

%.dll: $(SOURCES) ExiflowDevelopInUFRaw.addin.xml
	PKG_CONFIG_PATH=$(FSPOTDIR)/lib/pkgconfig gmcs -target:library $(SOURCES) $(PACKAGES) $(ASSEMBLIES) $(RESOURCES)

clean:
	rm -f *.dll *~ *.bak .mpack

PHONY:
	install clean all mpack
